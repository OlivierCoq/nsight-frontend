import{_ as T}from"./nuxt-link.MmuZqCTx.js";import{H as S,r as L,B as N,c as f,_ as P,n as B,s as g,w as r,q as i,o as d,b as c,a as o,K as M,d as h,v,x as U,F as E,t as b,y as F}from"./entry.edFZpnpL.js";import{d as I}from"./composables.PaokOPte.js";import{a as R}from"./auth.mQ8edLOI.js";const j=S({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(a,{slots:e,attrs:u}){const t=L(!1);return N(()=>{t.value=!0}),n=>{var m;if(t.value)return(m=e.default)==null?void 0:m.call(e);const _=e.fallback||e.placeholder;if(_)return _();const s=n.fallback||n.placeholder||"",p=n.fallbackTag||n.placeholderTag||"span";return f(p,u,s)}}}),A={name:"IndexPage",setup(){const a=B({input:{email:"",password:"",nsight_id:"",strapi_data:!1},quotes:!1,quote:!1,nsight_ids:!1,errors:[],loading:!1}),e=R(),u=F(),t=()=>{if(a.quotes){let s=Math.floor(Math.random()*a.quotes.data.length);a.quote=a.quotes.data[s]}},n=async()=>{await $fetch(`${u.public.NUXT_STRAPI_URL}/api/quotes?populate=*`,{method:"GET"}).then(s=>{a.quotes=s,t()}).catch(s=>{console.log(s)})},_=async()=>{console.log("signing in!"),a.loading=!0,await e.login({identifier:a.input.email,password:a.input.password}).catch(s=>{console.log("err",s),a.errors.push("Incorrect email, username, or password."),a.loading=!1})};return n(),{state:a,definePageMeta:I,quotes:n,pull_quote:t,sign_in:_}}},O={class:"d-flex flex-column justify-center align-center p-3 pmd-5 h-100vh"},z=o("img",{src:"https://res.cloudinary.com/nsight/image/upload/v1668144672/ps_nsight_logo_0362f44f69.png",class:"w-100 mt-5 mb-4",alt:"PS/nSight Logo"},null,-1),D={class:"w-100"},G={class:"mb-3"},H={class:"mb-3"},K={class:"mb-3"},X={class:"mb-3"},J={class:"text-light"},Q=o("p",{class:"mb-2 fw-bold"},"Oh no! Something went wrong: ",-1),W={class:"list-group-danger p-0"},Y={class:"my-4"},Z={class:"w-100 px-3 py-4"},$={key:0},tt={class:"blockquote"},et={class:"text-light"},ot={class:"blockquote-footer"},at=["href","target"];function st(a,e,u,t,n,_){const s=i("v-text-field"),p=i("v-progress-circular"),m=i("v-btn"),k=T,w=i("v-alert"),x=j,q=i("v-col"),y=i("v-row"),C=i("v-container");return d(),g(C,{fluid:"",id:"login_screen"},{default:r(()=>[c(y,null,{default:r(()=>[c(q,{cols:"12",sm:"12",md:"6","offset-md":"3"},{default:r(()=>[o("div",O,[z,o("form",D,[o("div",G,[c(s,{modelValue:t.state.input.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.state.input.email=l),type:"email",placeholder:"Email",onChange:e[1]||(e[1]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",H,[c(s,{modelValue:t.state.input.password,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.input.password=l),type:"password",placeholder:"Password",onChange:e[3]||(e[3]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",K,[c(m,{block:"",color:"primary",onClick:M(t.sign_in,["prevent"]),disabled:t.state.loading},{default:r(()=>[h(" Let's get it "),t.state.loading?(d(),g(p,{key:0,indeterminate:"",color:"white",size:"15",class:"mx-2"})):v("",!0)]),_:1},8,["onClick","disabled"])]),o("div",X,[o("small",J,[h("Forgot Password? "),c(k,{to:"/forgot-password",class:"text-info fw-bolder text-decoration-none"},{default:r(()=>[h("Let's fix that. ")]),_:1})])]),t.state.errors.length?(d(),g(w,{key:0,color:"error"},{default:r(()=>[Q,o("ul",W,[(d(!0),f(E,null,U(t.state.errors,(l,V)=>(d(),f("li",{key:V},b(l)+".",1))),128))])]),_:1})):v("",!0),o("div",Y,[o("div",Z,[c(x,null,{default:r(()=>[t.state.quote?(d(),f("figure",$,[o("blockquote",tt,[o("p",et,b(t.state.quote.quote_body[0].children[0].text),1)]),o("figcaption",ot,[o("a",{href:t.state.quote.link?t.state.quote.link:"javascript:(0)",target:t.state.quote.link?"_blank":"_self",class:"text-decoration-none text-info"}," - "+b(t.state.quote.author),9,at)])])):v("",!0)]),_:1})])])])])]),_:1})]),_:1})]),_:1})}const ct=P(A,[["render",st]]);export{ct as default};
