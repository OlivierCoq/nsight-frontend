import{_ as V}from"./nuxt-link.p1OWaNtk.js";import{u as T,r as L,B as N,c as f,n as P,s as p,w as r,q as i,o as d,b as c,a as o,I as B,d as h,x as v,z as M,F as E,t as b,E as I}from"./entry.3c5cgt-_.js";import{d as U}from"./composables.PaokOPte.js";import{a as j}from"./auth.yBsjWw8t.js";import{_ as F}from"./_plugin-vue_export-helper.x3n3nnut.js";const R=T({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(a,{slots:e,attrs:u}){const t=L(!1);return N(()=>{t.value=!0}),s=>{var m;if(t.value)return(m=e.default)==null?void 0:m.call(e);const _=e.fallback||e.placeholder;if(_)return _();const n=s.fallback||s.placeholder||"",g=s.fallbackTag||s.placeholderTag||"span";return f(g,u,n)}}}),z={name:"IndexPage",setup(){const a=P({input:{email:"",password:"",nsight_id:"",strapi_data:!1},quotes:!1,quote:!1,nsight_ids:!1,errors:[],loading:!1}),e=j(),u=I(),t=()=>{if(a.quotes){let n=Math.floor(Math.random()*a.quotes.data.length);a.quote=a.quotes.data[n]}},s=async()=>{await $fetch(`${u.public.NUXT_STRAPI_URL}/api/quotes?populate=*`,{method:"GET"}).then(n=>{a.quotes=n,t()}).catch(n=>{console.log(n)})},_=async()=>{console.log("Signing in nSight member!"),a.loading=!0,await e.login({identifier:a.input.email,password:a.input.password}).catch(n=>{console.log("err",n),a.errors.push("Incorrect email, username, or password."),a.loading=!1})};return s(),{state:a,definePageMeta:U,quotes:s,pull_quote:t,sign_in:_}}},A={class:"d-flex flex-column justify-center align-center p-3 pmd-5 h-100vh"},O=o("img",{src:"https://res.cloudinary.com/nsight/image/upload/v1708400678/n_Sight_logo_dark_dd6d0a819c.jpg",class:"w-100 mt-5 mb-4",alt:"PS/nSight Logo"},null,-1),D={class:"w-100"},G={class:"mb-3"},X={class:"mb-3"},H={class:"mb-3"},J={class:"mb-3"},K={class:"text-light"},Q=o("p",{class:"mb-2 fw-bold"},"Oh no! Something went wrong:",-1),W={class:"list-group-danger p-0"},Y={class:"my-4"},Z={class:"w-100 px-3 py-4"},$={key:0},tt={class:"blockquote"},et={class:"text-light"},ot={class:"blockquote-footer"},at=["href","target"];function nt(a,e,u,t,s,_){const n=i("v-text-field"),g=i("v-progress-circular"),m=i("v-btn"),k=V,w=i("v-alert"),x=R,q=i("v-col"),y=i("v-row"),C=i("v-container");return d(),p(C,{fluid:"",id:"login_screen"},{default:r(()=>[c(y,null,{default:r(()=>[c(q,{cols:"12",sm:"12",md:"6","offset-md":"3"},{default:r(()=>[o("div",A,[O,o("form",D,[o("div",G,[c(n,{modelValue:t.state.input.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.state.input.email=l),type:"email",placeholder:"Email",onChange:e[1]||(e[1]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",X,[c(n,{modelValue:t.state.input.password,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.input.password=l),type:"password",placeholder:"Password",onChange:e[3]||(e[3]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",H,[c(m,{block:"",onClick:B(t.sign_in,["prevent"]),disabled:t.state.loading,class:"nsight-btn-primary"},{default:r(()=>[h(" Let's get it "),t.state.loading?(d(),p(g,{key:0,indeterminate:"",color:"white",size:"15",class:"mx-2"})):v("",!0)]),_:1},8,["onClick","disabled"])]),o("div",J,[o("small",K,[h("Forgot Password? "),c(k,{to:"/forgot-password",class:"text-info fw-bolder text-decoration-none"},{default:r(()=>[h("Let's fix that. ")]),_:1})])]),t.state.errors.length?(d(),p(w,{key:0,color:"error"},{default:r(()=>[Q,o("ul",W,[(d(!0),f(E,null,M(t.state.errors,(l,S)=>(d(),f("li",{key:S},b(l)+". ",1))),128))])]),_:1})):v("",!0),o("div",Y,[o("div",Z,[c(x,null,{default:r(()=>[t.state.quote?(d(),f("figure",$,[o("blockquote",tt,[o("p",et,b(t.state.quote.quote_body[0].children[0].text),1)]),o("figcaption",ot,[o("a",{href:t.state.quote.link?t.state.quote.link:"javascript:(0)",target:t.state.quote.link?"_blank":"_self",class:"text-decoration-none text-info"}," - "+b(t.state.quote.author),9,at)])])):v("",!0)]),_:1})])])])])]),_:1})]),_:1})]),_:1})}const dt=F(z,[["render",nt]]);export{dt as default};
