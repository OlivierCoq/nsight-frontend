import ct from"./progressspinner.esm.qPlohcqp.js";import dt from"./dialog.esm.pqJyvCCx.js";import ut from"./carousel.esm.w8-NQShB.js";import mt from"./toast.esm.2YClhUpU.js";import{r as pt,K as ft,L as _t,n as xt,C as ht,c as u,a,u as o,b as $,G as gt,w as X,y as T,t as S,q as yt,v as bt,F as Z,A as tt,d as vt,B as wt,D as kt,o as d,z as q,s as Dt}from"./entry.MgUDxhFU.js";import{a as Vt,p as Ct}from"./auth.SZYyi0EM.js";import"./basecomponent.esm.ZwRjb1O0.js";import"./index.esm.e4YD8uC-.js";import"./ripple.esm.M9rvyZ53.js";import"./portal.esm.P3ujgpuN.js";import"./index.esm.adbZqsRa.js";import"./index.esm.c4Xvj0mt.js";import"./index.esm.KtLlzZjE.js";const Mt={class:"h-[100vh] w-full bg-zinc-200 dark:bg-zinc-900 flex flex-col px-3 py-4"},$t={class:"container mx-auto p-3 flex flex-col md:flex-row"},St={key:0,class:"flex flex-row justify-start items-start"},Tt={key:1,class:"w-full md:w-1/2 p-3 flex flex-col"},qt=["src"],At={class:"py-2"},zt=["onClick"],Ot={class:"w-full md:w-1/2 p-6 bg-zinc-300 dark:bg-zinc-800 rounded-md shadow-xl mx-3"},jt={class:"w-3/4 flex flex-row justify-between"},Bt={class:"text-3xl text-neutral-900 dark:text-neutral-200 font-thin pb-3"},Et=["innerHTML"],It={class:"text-lg text-neutral-900 dark:text-neutral-200 opacity-85"},Nt={class:"w-full md:w-1/4 mt-5"},Ut=a("label",{for:"quantity",class:"text-md text-neutral-900 dark:text-neutral-200 font-thin"},"Quantity",-1),Lt={class:"w-full flex flex-row justify-start pb-5 items-center"},Pt={class:"w-full mt-5 mb-10 flex flex-row items-start"},Ft=a("h2",{class:"text-md text-neutral-900 dark:text-neutral-200 font-thin"},"Categories: ",-1),Gt={class:"flex flex-row items-center"},Ht={key:0,class:"w-full mb-8 flex flex-col items-start justify-start"},Rt={class:"text-md text-neutral-900 dark:text-neutral-200 font-thin"},Jt={class:"w-full grid grid-cols-6"},Kt=["onClick"],de={__name:"[id]",setup(Qt){pt();const et=ft(),c=Vt(),at=Ct(),rt=_t(),t=xt({product:null,max_quantity:30,quantity:1,main_img:null,loading:!0,selected:null,variations:{titles:[],options:[]}});ht(()=>{$fetch("/api/square/retrieve-item",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt.params.id)}).then(s=>{var r,n;t.product=s,t.product.images=[],t.product.categories=[],t.product.related.forEach(e=>{e.type==="IMAGE"&&(e.modal=!1,t.product.images.push(e)),e.type==="CATEGORY"&&t.product.categories.push(e)}),t.selected=(r=t.product.item.itemData.variations)!=null&&r.length?t.product.item.itemData.variations[0]:t.product.item,t.main_img=t.product.images[0].imageData.url,(n=t.product.item.itemData.variations)==null||n.forEach(e=>{var l;t.variations.titles.includes(Object.entries(e.customAttributeValues)[0][1]).name||t.variations.titles.push((l=Object.entries(e==null?void 0:e.customAttributeValues)[0][1])==null?void 0:l.name),t.variations.titles.includes(Object.entries(e.customAttributeValues)[0][1])||t.variations.options.push(Object.entries(e==null?void 0:e.customAttributeValues)[0][1])}),t.loading=!1}).catch(s=>{console.log(s)})});const st=(s,r)=>{if(r==="USD")return`$${(s/100).toFixed(2)}`},ot=()=>{var r,n,e,l,m,f,_,x,h,g,y,b,v,w,k,D,V,C;t.loading=!0;const s={quantity:t.quantity,name:(n=(r=t.selected)==null?void 0:r.itemVariationData)!=null&&n.name?(l=(e=t.selected)==null?void 0:e.itemVariationData)==null?void 0:l.name:t.product.item.itemData.name,images:(m=t.selected)!=null&&m.images?(f=t.selected)==null?void 0:f.images:t.product.images,appliedTaxes:[],appliedDiscounts:[],basePriceMoney:{amount:(h=(x=(_=t.selected)==null?void 0:_.itemVariationData)==null?void 0:x.priceMoney)!=null&&h.amount?(b=(y=(g=t.selected)==null?void 0:g.itemVariationData)==null?void 0:y.priceMoney)==null?void 0:b.amount:t.product.item.itemData.variations[0].priceMoney.amount,currency:(k=(w=(v=t.selected)==null?void 0:v.itemVariationData)==null?void 0:w.priceMoney)!=null&&k.currency?(C=(V=(D=t.selected)==null?void 0:D.itemVariationData)==null?void 0:V.priceMoney)==null?void 0:C.currency:t.product.item.itemData.variations[0].priceMoney.currency}};at.add_to_cart(s),et.add({detail:`${s.name} added to cart!`,life:3e4})},it=s=>{t.selected=s},nt=()=>{var s,r,n,e,l;return(l=(r=(s=c==null?void 0:c.user)==null?void 0:s.favorites)==null?void 0:r.products)==null?void 0:l.includes((e=(n=t.product)==null?void 0:n.item)==null?void 0:e.id)},lt=s=>{var r,n,e,l,m;(m=(n=(r=c==null?void 0:c.user)==null?void 0:r.favorites)==null?void 0:n.products)!=null&&m.includes((l=(e=t.product)==null?void 0:e.item)==null?void 0:l.id)?c.user.favorites.products=c.user.favorites.products.filter(f=>f!==s.id):c.user.favorites.products.push(s.id),wt(()=>{c.updateUser()})};return(s,r)=>{var _,x,h,g,y,b,v,w,k,D,V,C,A,z,O,j,B,E,I,N,U,L,P,F,G,H,R,J,K,Q,W;const n=ct,e=dt,l=ut,m=mt,f=kt("font-awesome-icon");return d(),u("div",Mt,[a("div",$t,[o(t).product?(d(),u("div",Tt,[a("img",{class:"w-full shadow-xl rounded-md",src:(h=(x=(_=o(t))==null?void 0:_.selected)==null?void 0:x.images[0])==null?void 0:h.url},null,8,qt),a("div",At,[(b=(y=(g=o(t))==null?void 0:g.product)==null?void 0:y.images)!=null&&b.length?(d(),gt(l,{key:0,value:(w=(v=o(t))==null?void 0:v.product)==null?void 0:w.images,numVisible:3,circular:"",numScroll:3,autoplayInterval:3e3},{item:X(i=>[a("div",{class:"w-[190px] h-[135px] mx-2 bg-cover bg-center rounded-md shadow-lg hover:cursor-pointer",onClick:p=>i.data.modal=!0,style:q({backgroundImage:`url(${i.data.imageData.url})`})},[$(e,{visible:i.data.modal,"onUpdate:visible":p=>i.data.modal=p,style:{width:"50rem"}},{default:X(()=>[a("div",{class:"w-full bg-center bg-cover h-[50rem]",style:q({backgroundImage:`url(${i.data.imageData.url})`})},null,4)]),_:2},1032,["visible","onUpdate:visible"])],12,zt)]),_:1},8,["value"])):T("",!0)])])):(d(),u("div",St,[$(n,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])),a("div",Ot,[a("div",jt,[a("h1",Bt,S((V=(D=(k=o(t).product)==null?void 0:k.item)==null?void 0:D.itemData)==null?void 0:V.name),1),a("h2",{class:"text-xl text-neutral-900 dark:text-neutral-200 font-thin",innerHTML:st((z=(A=(C=o(t).selected)==null?void 0:C.itemVariationData)==null?void 0:A.priceMoney)==null?void 0:z.amount,(B=(j=(O=o(t).selected)==null?void 0:O.itemVariationData)==null?void 0:j.priceMoney)==null?void 0:B.currency)},null,8,Et)]),a("p",It,S((N=(I=(E=o(t).product)==null?void 0:E.item)==null?void 0:I.itemData)==null?void 0:N.description),1),a("div",Nt,[Ut,yt(a("input",{type:"number","onUpdate:modelValue":r[0]||(r[0]=i=>o(t).quantity=i),class:"my-2 bg-transparent border border-gray-100 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-transparent dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[bt,o(t).quantity]])]),a("div",Lt,[$(m),(U=o(t).product)!=null&&U.item?(d(),u("button",{key:0,class:"btn-add_to_cart nsight-btn-primary my-1 py-1 w-full md:w-1/2 px-5 text-white shadow-xl rounded-md",onClick:ot},"Add to cart")):T("",!0),$(f,{icon:[nt()?"fas":"far","heart"],class:"text-red-500 hover:text-red-600 text-3xl ml-3 hover:cursor-pointer drop-shadow-xl",onClick:r[1]||(r[1]=i=>{var p,M;return lt((M=(p=o(t))==null?void 0:p.product)==null?void 0:M.item)})},null,8,["icon"])]),a("div",Pt,[Ft,a("div",Gt,[(d(!0),u(Z,null,tt((L=o(t).product)==null?void 0:L.categories,i=>(d(),u("p",{key:i.id,class:"mx-2 font-normal hover:cursor-pointer text-neutral-900 dark:text-white opacity-75 hover:opacity-1"},S(i.categoryData.name),1))),128))])]),(H=(G=(F=(P=o(t).product)==null?void 0:P.item)==null?void 0:F.itemData)==null?void 0:G.variations)!=null&&H.length?(d(),u("div",Ht,[a("h2",Rt,[vt("Styles : "),a("strong",null,S((J=(R=o(t).selected)==null?void 0:R.itemVariationData)==null?void 0:J.name),1)]),a("div",Jt,[(d(!0),u(Z,null,tt((W=(Q=(K=o(t).product)==null?void 0:K.item)==null?void 0:Q.itemData)==null?void 0:W.variations,(i,p)=>{var M,Y;return d(),u("div",{key:p,class:Dt(["w-[75px] h-[75px] my-4 bg-cover bg-center rounded-md shadow-lg hover:cursor-pointer",[((M=o(t).selected)==null?void 0:M.id)===i.id?"border-4 border-yellow-400":""]]),style:q({backgroundImage:`url(${(Y=i.images[0])==null?void 0:Y.url})`}),onClick:Wt=>it(i)},null,14,Kt)}),128))])])):T("",!0)])])])}}};export{de as default};
