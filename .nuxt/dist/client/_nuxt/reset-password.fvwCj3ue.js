import{d as y}from"./composables.PaokOPte.js";import{n as b,c as i,b as o,w as r,J as k,D as n,o as d,a as t,K as C,d as w,y as _,G as T,H as x}from"./entry.rB01nS72.js";import{_ as P}from"./_plugin-vue_export-helper.x3n3nnut.js";const V={name:"ResetPassword",setup(){const s=b({new_password:"",confirm_new_password:"",success:!1,error:!1,errors:!1,post:!1,send:!1}),a=x();return{definePageMeta:y,state:s,reset_password:async()=>{s.error=!1,s.new_password!==s.confirm_new_password&&(s.errors=[],s.errors.push("Passwords do not match.")),s.post=await $fetch(`${a.public.NUXT_STRAPI_URL}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({code:s.code,password:s.new_password,passwordConfirmation:s.confirm_new_password})}).then(c=>{console.log("password Confirm success",c),s.success="Password updated successfully. You can now use it to log in to your account."}).catch(c=>{s.error=c.response.data.error.message})},goToLogin:()=>{k("/")}}}},L={id:"reset_password",class:"bg-dark d-flex flex-column justify-center align-center p-3 p-md-5 h-100"},N=t("h1",{class:"text-light m-3"},"reset password",-1),M=t("hr",{class:"mb-3"},null,-1),H={key:0,class:"w-100"},R={class:"mb-3"},B={class:"mb-3"},U={class:"mb-3"},j=["innerHTML"],S={key:2,class:"my-3 alert alert-danger"},I=["innerHTML"];function J(s,a,f,e,c,O){const p=n("v-text-field"),m=n("v-btn"),u=n("v-alert"),h=n("v-col"),v=n("v-row"),g=n("v-container");return d(),i("div",L,[o(g,null,{default:r(()=>[o(v,null,{default:r(()=>[o(h,{cols:"12",md:"6","offset-md":"3"},{default:r(()=>[N,M,e.state.success?_("",!0):(d(),i("form",H,[t("div",R,[o(p,{modelValue:e.state.new_password,"onUpdate:modelValue":a[0]||(a[0]=l=>e.state.new_password=l),placeholder:"New Password",type:"password"},null,8,["modelValue"])]),t("div",B,[o(p,{modelValue:e.state.confirm_new_password,"onUpdate:modelValue":a[1]||(a[1]=l=>e.state.confirm_new_password=l),placeholder:"Confirm Password",type:"password"},null,8,["modelValue"])]),t("div",U,[o(m,{color:"primary",block:"",onClick:C(e.reset_password,["prevent"]),disabled:e.state.confirm_new_password.length<1},{default:r(()=>[w(" Reset Password ")]),_:1},8,["onClick","disabled"])])])),e.state.success?(d(),T(u,{key:1,color:"success",class:"my-3"},{default:r(()=>[t("p",{innerHTML:e.state.success},null,8,j),o(m,{color:"primary",block:"",onClick:e.goToLogin},{default:r(()=>[w("Log In")]),_:1},8,["onClick"])]),_:1})):_("",!0),e.state.error?(d(),i("div",S,[t("p",{innerHTML:e.state.error},null,8,I)])):_("",!0)]),_:1})]),_:1})]),_:1})])}const G=P(V,[["render",J]]);export{G as default};
