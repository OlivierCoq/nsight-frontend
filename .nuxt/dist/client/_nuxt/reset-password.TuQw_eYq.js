import{d as y}from"./composables.PaokOPte.js";import{_ as b,n as k,c as i,b as o,w as r,G as C,q as n,o as d,a as t,K as T,d as w,v as _,s as x,y as P}from"./entry.edFZpnpL.js";const V={name:"ResetPassword",setup(){const s=k({new_password:"",confirm_new_password:"",success:!1,error:!1,errors:!1,post:!1,send:!1}),a=P();return{definePageMeta:y,state:s,reset_password:async()=>{s.error=!1,s.new_password!==s.confirm_new_password&&(s.errors=[],s.errors.push("Passwords do not match.")),s.post=await $fetch(`${a.public.NUXT_STRAPI_URL}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({code:s.code,password:s.new_password,passwordConfirmation:s.confirm_new_password})}).then(c=>{console.log("password Confirm success",c),s.success="Password updated successfully. You can now use it to log in to your account."}).catch(c=>{s.error=c.response.data.error.message})},goToLogin:()=>{C("/")}}}},L={id:"reset_password",class:"bg-dark d-flex flex-column justify-center align-center p-3 p-md-5 h-100"},N=t("h1",{class:"text-light m-3"},"reset password",-1),M=t("hr",{class:"mb-3"},null,-1),R={key:0,class:"w-100"},B={class:"mb-3"},H={class:"mb-3"},U={class:"mb-3"},j=["innerHTML"],S={key:2,class:"my-3 alert alert-danger"},I=["innerHTML"];function O(s,a,f,e,c,q){const p=n("v-text-field"),m=n("v-btn"),u=n("v-alert"),h=n("v-col"),v=n("v-row"),g=n("v-container");return d(),i("div",L,[o(g,null,{default:r(()=>[o(v,null,{default:r(()=>[o(h,{cols:"12",md:"6","offset-md":"3"},{default:r(()=>[N,M,e.state.success?_("",!0):(d(),i("form",R,[t("div",B,[o(p,{modelValue:e.state.new_password,"onUpdate:modelValue":a[0]||(a[0]=l=>e.state.new_password=l),placeholder:"New Password",type:"password"},null,8,["modelValue"])]),t("div",H,[o(p,{modelValue:e.state.confirm_new_password,"onUpdate:modelValue":a[1]||(a[1]=l=>e.state.confirm_new_password=l),placeholder:"Confirm Password",type:"password"},null,8,["modelValue"])]),t("div",U,[o(m,{color:"primary",block:"",onClick:T(e.reset_password,["prevent"]),disabled:e.state.confirm_new_password.length<1},{default:r(()=>[w(" Reset Password ")]),_:1},8,["onClick","disabled"])])])),e.state.success?(d(),x(u,{key:1,color:"success",class:"my-3"},{default:r(()=>[t("p",{innerHTML:e.state.success},null,8,j),o(m,{color:"primary",block:"",onClick:e.goToLogin},{default:r(()=>[w("Log In")]),_:1},8,["onClick"])]),_:1})):_("",!0),e.state.error?(d(),i("div",S,[t("p",{innerHTML:e.state.error},null,8,I)])):_("",!0)]),_:1})]),_:1})]),_:1})])}const G=b(V,[["render",O]]);export{G as default};
