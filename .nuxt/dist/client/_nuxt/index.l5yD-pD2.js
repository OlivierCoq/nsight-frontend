import{_ as S}from"./nuxt-link.6trGmI1q.js";import{y as T,r as L,E as M,c as f,_ as N,n as P,s as g,w as r,q as i,o as d,b as c,a as o,M as B,d as h,A as v,C as E,F as U,t as b,J as A}from"./entry.7QSeHbCR.js";import{d as F}from"./composables.PaokOPte.js";import{a as I}from"./auth.NqmLPuA9.js";const R=T({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(a,{slots:e,attrs:u}){const t=L(!1);return M(()=>{t.value=!0}),s=>{var m;if(t.value)return(m=e.default)==null?void 0:m.call(e);const _=e.fallback||e.placeholder;if(_)return _();const n=s.fallback||s.placeholder||"",p=s.fallbackTag||s.placeholderTag||"span";return f(p,u,n)}}}),j={name:"IndexPage",setup(){const a=P({input:{email:"",password:"",nsight_id:"",strapi_data:!1},quotes:!1,quote:!1,nsight_ids:!1,errors:[],loading:!1}),e=I(),u=A(),t=()=>{if(a.quotes){let n=Math.floor(Math.random()*a.quotes.data.length);a.quote=a.quotes.data[n]}},s=async()=>{await $fetch(`${u.public.NUXT_STRAPI_URL}/api/quotes?populate=*`,{method:"GET"}).then(n=>{a.quotes=n,t()}).catch(n=>{console.log(n)})},_=async()=>{console.log("Signing in nSight member!"),a.loading=!0,await e.login({identifier:a.input.email,password:a.input.password}).catch(n=>{console.log("err",n),a.errors.push("Incorrect email, username, or password."),a.loading=!1})};return s(),{state:a,definePageMeta:F,quotes:s,pull_quote:t,sign_in:_}}},O={class:"d-flex flex-column justify-center align-center p-3 pmd-5 h-100vh"},z=o("img",{src:"https://res.cloudinary.com/nsight/image/upload/v1668144672/ps_nsight_logo_0362f44f69.png",class:"w-100 mt-5 mb-4",alt:"PS/nSight Logo"},null,-1),D={class:"w-100"},G={class:"mb-3"},J={class:"mb-3"},X={class:"mb-3"},H={class:"mb-3"},K={class:"text-light"},Q=o("p",{class:"mb-2 fw-bold"},"Oh no! Something went wrong: ",-1),W={class:"list-group-danger p-0"},Y={class:"my-4"},Z={class:"w-100 px-3 py-4"},$={key:0},tt={class:"blockquote"},et={class:"text-light"},ot={class:"blockquote-footer"},at=["href","target"];function nt(a,e,u,t,s,_){const n=i("v-text-field"),p=i("v-progress-circular"),m=i("v-btn"),k=S,w=i("v-alert"),x=R,q=i("v-col"),y=i("v-row"),C=i("v-container");return d(),g(C,{fluid:"",id:"login_screen"},{default:r(()=>[c(y,null,{default:r(()=>[c(q,{cols:"12",sm:"12",md:"6","offset-md":"3"},{default:r(()=>[o("div",O,[z,o("form",D,[o("div",G,[c(n,{modelValue:t.state.input.email,"onUpdate:modelValue":e[0]||(e[0]=l=>t.state.input.email=l),type:"email",placeholder:"Email",onChange:e[1]||(e[1]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",J,[c(n,{modelValue:t.state.input.password,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.input.password=l),type:"password",placeholder:"Password",onChange:e[3]||(e[3]=l=>t.state.errors=[])},null,8,["modelValue"])]),o("div",X,[c(m,{block:"",color:"primary",onClick:B(t.sign_in,["prevent"]),disabled:t.state.loading},{default:r(()=>[h(" Let's get it "),t.state.loading?(d(),g(p,{key:0,indeterminate:"",color:"white",size:"15",class:"mx-2"})):v("",!0)]),_:1},8,["onClick","disabled"])]),o("div",H,[o("small",K,[h("Forgot Password? "),c(k,{to:"/forgot-password",class:"text-info fw-bolder text-decoration-none"},{default:r(()=>[h("Let's fix that. ")]),_:1})])]),t.state.errors.length?(d(),g(w,{key:0,color:"error"},{default:r(()=>[Q,o("ul",W,[(d(!0),f(U,null,E(t.state.errors,(l,V)=>(d(),f("li",{key:V},b(l)+".",1))),128))])]),_:1})):v("",!0),o("div",Y,[o("div",Z,[c(x,null,{default:r(()=>[t.state.quote?(d(),f("figure",$,[o("blockquote",tt,[o("p",et,b(t.state.quote.quote_body[0].children[0].text),1)]),o("figcaption",ot,[o("a",{href:t.state.quote.link?t.state.quote.link:"javascript:(0)",target:t.state.quote.link?"_blank":"_self",class:"text-decoration-none text-info"}," - "+b(t.state.quote.author),9,at)])])):v("",!0)]),_:1})])])])])]),_:1})]),_:1})]),_:1})}const ct=N(j,[["render",nt]]);export{ct as default};
