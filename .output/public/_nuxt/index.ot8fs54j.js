import{_ as w}from"./nuxt-link.m3lAiXDi.js";import{x as b,n as y,o as l,c as i,a as o,q as r,v as d,u as e,s as q,y as c,d as u,b as k,w as v,t as m,H as S}from"./entry.MgUDxhFU.js";import{a as C}from"./auth.SZYyi0EM.js";const N={class:"w-full h-[100vh] bg-zinc-800 dark:bg-black"},V={class:"w-1/2 mx-auto h-100 flex flex-col items-center justify-center"},T=o("img",{src:"https://res.cloudinary.com/nsight/image/upload/v1708400678/n_Sight_logo_dark_dd6d0a819c.jpg",class:"w-100 mt-5 mb-4",alt:"PS/nSight Logo"},null,-1),j={class:"w-3/4 mx-auto mb-4"},B=["disabled"],L={key:0,class:"animate-spin h-5 w-5 mr-3 text-white",viewBox:"0 0 24 24"},P=o("span",{class:"text-center"}," let's get it ",-1),U={class:"w-3/4 mx-auto mb-4"},E={class:"text-neutral-900 dark:text-white"},M={class:"w-3/4 mx-auto my-5"},R={key:0,class:"text-neutral-900 dark:text-white text-xl"},z={class:"text-md"},D=["href","target"],G=b({__name:"index",setup(I){const t=y({input:{email:"",password:"",nsight_id:"",strapi_data:!1},quotes:!1,quote:!1,nsight_ids:!1,errors:[],loading:!1}),p=C(),_=S(),h=()=>{if(t.quotes){let s=Math.floor(Math.random()*t.quotes.data.length);t.quote=t.quotes.data[s]}},x=async()=>{await $fetch(`${_.public.NUXT_STRAPI_URL}/api/quotes?populate=*`,{method:"GET"}).then(s=>{t.quotes=s,h()}).catch(s=>{console.log(s)})},g=async()=>{console.log("Signing in nSight member!"),t.loading=!0,await p.login({identifier:t.input.email,password:t.input.password}).catch(s=>{console.log("err",s),t.errors.push("Incorrect email, username, or password."),t.loading=!1})};return x(),(s,a)=>{const f=w;return l(),i("div",N,[o("div",V,[T,o("div",j,[r(o("input",{type:"email",class:"w-full text-neutral-900 shadow-xl border-0 rounded-md h-[40px] my-2 px-4","onUpdate:modelValue":a[0]||(a[0]=n=>e(t).input.email=n),placeholder:"Email"},null,512),[[d,e(t).input.email]]),r(o("input",{type:"password",class:"w-full shadow-xl border-0 rounded-md h-[40px] my-2 px-4","onUpdate:modelValue":a[1]||(a[1]=n=>e(t).input.password=n),placeholder:"Password"},null,512),[[d,e(t).input.password]]),o("button",{class:q(["rounded-md shadow-xl w-full flex flex-row text-neutral-800 justify-center nsight-btn-primary my-2 py-2",e(t).loading?"opacity-25":"opacity-1"]),onClick:g,disabled:e(t).loading},[e(t).loading?(l(),i("svg",L)):c("",!0),P],10,B)]),o("div",U,[o("small",E,[u("Forgot Password? "),k(f,{to:"/forgot-password",class:"text-blue-300 fw-bolder text-decoration-none"},{default:v(()=>[u("Let's fix that. ")]),_:1})])]),o("div",M,[e(t).quote?(l(),i("p",R,' " '+m(e(t).quote.quote_body[0].children[0].text)+' " ',1)):c("",!0),o("small",z,[o("a",{href:e(t).quote.link?e(t).quote.link:"javascript:(0)",target:e(t).quote.link?"_blank":"_self",class:"text-decoration-none text-blue-200 font-bold text-lg"}," - "+m(e(t).quote.author),9,D)])])])])}}});export{G as default};
