import{d as y}from"./composables.PaokOPte.js";import{_ as x,n as b,c as l,b as i,w as a,q as r,o,v as c,a as n,K as C,d as m,s as u}from"./entry.edFZpnpL.js";const T={name:"ForgotPassword",setup(){const t=b({input:{email:"",success:!1,error:!1,post:!1,resent:!1,send:!1}}),s=async()=>{const e=/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;t.input.email.match(e)?(t.input.error=!1,t.post=await $fetch("https://nsightapi.vip/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({email:t.input.email})}).then(d=>{t.input.error=!1,t.input.success=`A reset link has been sent to your email account. <br/>
                      Please click on the link to complete the password reset.`}).catch(d=>{t.input.error=d.response.data.error.message})):t.input.error='Please enter email in "name@example.com" format.'};return{definePageMeta:y,state:t,forgot_password:s,resend:()=>{s(),t.input.resent=!0}}}},V={id:"forgot_password",class:"bg-dark w-100 h-100 text-start d-flex align-start justify-center flex-column"},M=n("h1",{class:"text-light m-3"},"forgot password?",-1),P=n("hr",null,null,-1),L={key:0,class:"text-light my-3"},N={key:1,class:"w-100"},S={class:"my-3"},A={class:"mb-3"},B=["innerHTML"],H={key:0},j={key:1,class:"fw-bolder"},z=["innerHTML"];function Z(t,s,f,e,d,O){const h=r("v-text-field"),v=r("v-btn"),p=r("v-alert"),g=r("v-col"),k=r("v-row"),w=r("v-container");return o(),l("div",V,[i(w,null,{default:a(()=>[i(k,null,{default:a(()=>[i(g,{cols:"12",sm:"12",md:"6","offset-md":"3"},{default:a(()=>[M,P,e.state.input.success?c("",!0):(o(),l("p",L,"Send me a reset link")),e.state.input.success?c("",!0):(o(),l("form",N,[n("div",S,[i(h,{modelValue:e.state.input.email,"onUpdate:modelValue":s[0]||(s[0]=_=>e.state.input.email=_),placeholder:"your email",type:"email"},null,8,["modelValue"])]),n("div",A,[i(v,{color:"primary",block:"",onClick:C(e.forgot_password,["prevent"]),disabled:e.state.input.email.length<1},{default:a(()=>[m(" Send Link ")]),_:1},8,["onClick","disabled"])])])),e.state.input.success?(o(),u(p,{key:2,text:"",color:"success",class:"my-3"},{default:a(()=>[n("p",{innerHTML:e.state.input.success},null,8,B),e.state.input.resent?(o(),l("p",j,"Resent.")):(o(),l("p",H,[m("Didn't get it? "),n("span",{class:"fw-bolder is-hoverable",onClick:s[1]||(s[1]=(..._)=>e.resend&&e.resend(..._))},"Send again")]))]),_:1})):c("",!0),e.state.input.error.length?(o(),u(p,{key:3,text:"",color:"error"},{default:a(()=>[n("p",{innerHTML:e.state.error},null,8,z)]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1})])}const E=x(T,[["render",Z]]);export{E as default};
